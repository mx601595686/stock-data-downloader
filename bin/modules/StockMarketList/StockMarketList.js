"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const service_starter_1 = require("service-starter");
const _ = require("lodash");
const StockMarketType_1 = require("./StockMarketType");
const sql = require("./Sql");
/**
 * 股票市场列表。
 * 该模块目前的主要目的就是创建`stock_market`数据表，并且将StockMarket.ts中的数据保存到数据库中
 */
class StockMarketList extends service_starter_1.BaseServiceModule {
    async onStart() {
        const con = this.services.MysqlConnection;
        await con.asyncQuery(sql.create_table); //创建数据表
        for (const item of _.values(StockMarketType_1.StockMarketType)) {
            await con.asyncQuery(sql.insert_data, [
                item.id, item.name, item.start_time, item.end_time, item.day_of_week,
                item.name, item.start_time, item.end_time, item.day_of_week
            ]);
        }
    }
}
exports.StockMarketList = StockMarketList;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvU3RvY2tNYXJrZXRMaXN0L1N0b2NrTWFya2V0TGlzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHFEQUFvRDtBQUNwRCw0QkFBNEI7QUFFNUIsdURBQW9EO0FBQ3BELDZCQUE2QjtBQUU3Qjs7O0dBR0c7QUFDSCxxQkFBNkIsU0FBUSxtQ0FBaUI7SUFFbEQsS0FBSyxDQUFDLE9BQU87UUFDVCxNQUFNLEdBQUcsR0FBb0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUM7UUFFM0QsTUFBTSxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFFLE9BQU87UUFFaEQsR0FBRyxDQUFDLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxpQ0FBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFO2dCQUNsQyxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxXQUFXO2dCQUNwRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVzthQUM5RCxDQUFDLENBQUM7UUFDUCxDQUFDO0lBQ0wsQ0FBQztDQUNKO0FBZEQsMENBY0MiLCJmaWxlIjoibW9kdWxlcy9TdG9ja01hcmtldExpc3QvU3RvY2tNYXJrZXRMaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTXlzcWxDb25uZWN0aW9uIH0gZnJvbSAnLi8uLi9NeXNxbENvbm5lY3Rpb24vTXlzcWxDb25uZWN0aW9uJztcclxuaW1wb3J0IHsgQmFzZVNlcnZpY2VNb2R1bGUgfSBmcm9tIFwic2VydmljZS1zdGFydGVyXCI7XHJcbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcclxuXHJcbmltcG9ydCB7IFN0b2NrTWFya2V0VHlwZSB9IGZyb20gJy4vU3RvY2tNYXJrZXRUeXBlJztcclxuaW1wb3J0ICogYXMgc3FsIGZyb20gJy4vU3FsJztcclxuXHJcbi8qKlxyXG4gKiDogqHnpajluILlnLrliJfooajjgIJcclxuICog6K+l5qih5Z2X55uu5YmN55qE5Li76KaB55uu55qE5bCx5piv5Yib5bu6YHN0b2NrX21hcmtldGDmlbDmja7ooajvvIzlubbkuJTlsIZTdG9ja01hcmtldC50c+S4reeahOaVsOaNruS/neWtmOWIsOaVsOaNruW6k+S4rVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN0b2NrTWFya2V0TGlzdCBleHRlbmRzIEJhc2VTZXJ2aWNlTW9kdWxlIHtcclxuXHJcbiAgICBhc3luYyBvblN0YXJ0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGNvbjogTXlzcWxDb25uZWN0aW9uID0gdGhpcy5zZXJ2aWNlcy5NeXNxbENvbm5lY3Rpb247XHJcblxyXG4gICAgICAgIGF3YWl0IGNvbi5hc3luY1F1ZXJ5KHNxbC5jcmVhdGVfdGFibGUpOyAgLy/liJvlu7rmlbDmja7ooahcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgXy52YWx1ZXMoU3RvY2tNYXJrZXRUeXBlKSkgeyAvL+WQkeihqOS4reaPkuWFpeaVsOaNrlxyXG4gICAgICAgICAgICBhd2FpdCBjb24uYXN5bmNRdWVyeShzcWwuaW5zZXJ0X2RhdGEsIFtcclxuICAgICAgICAgICAgICAgIGl0ZW0uaWQsIGl0ZW0ubmFtZSwgaXRlbS5zdGFydF90aW1lLCBpdGVtLmVuZF90aW1lLCBpdGVtLmRheV9vZl93ZWVrLFxyXG4gICAgICAgICAgICAgICAgaXRlbS5uYW1lLCBpdGVtLnN0YXJ0X3RpbWUsIGl0ZW0uZW5kX3RpbWUsIGl0ZW0uZGF5X29mX3dlZWtcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19
